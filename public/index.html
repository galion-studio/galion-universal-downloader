<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RunPod Universal Downloader - Download EVERYTHING</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">ğŸš€</span>
                <div class="logo-text">
                    <h1>RunPod Universal</h1>
                    <span class="tagline">Download EVERYTHING from ANYWHERE</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-ghost" id="settings-btn" title="Settings">
                    âš™ï¸ API Keys
                </button>
                <span class="status-badge" id="status-badge">
                    <span class="status-dot"></span>
                    <span>Online</span>
                </span>
            </div>
        </header>

        <!-- Platform Icons Bar -->
        <div class="platform-bar">
            <div class="platform-icons">
                <span class="platform-icon" title="CivitAI">ğŸ¨</span>
                <span class="platform-icon" title="GitHub">ğŸ™</span>
                <span class="platform-icon" title="YouTube">ğŸ¬</span>
                <span class="platform-icon" title="Telegram">ğŸ“¨</span>
                <span class="platform-icon" title="Instagram">ğŸ“¸</span>
                <span class="platform-icon" title="Facebook">ğŸ“˜</span>
                <span class="platform-icon" title="Twitter/X">ğŸ¦</span>
                <span class="platform-icon" title="TikTok">ğŸµ</span>
                <span class="platform-icon" title="HuggingFace">ğŸ¤—</span>
                <span class="platform-icon" title="Any URL">ğŸŒ</span>
            </div>
            <span class="platform-text">Supports ALL Platforms</span>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Universal Download Section -->
            <section class="card download-section hero-card">
                <div class="card-header">
                    <h2>ğŸ“¥ Universal Download</h2>
                    <span class="badge badge-glow">PASTE ANY LINK</span>
                </div>
                
                <div class="url-input-container">
                    <div class="url-input-wrapper">
                        <span class="url-icon" id="detected-platform">ğŸ”—</span>
                        <input type="url" id="url-input" placeholder="Paste any URL... CivitAI, GitHub, YouTube, Instagram, Twitter, and more!" autocomplete="off">
                        <button class="btn btn-accent btn-download" id="download-btn">
                            <span class="btn-text">Download</span>
                            <span class="btn-icon">â¬‡ï¸</span>
                        </button>
                    </div>
                    <div class="url-detection" id="url-detection">
                        <span class="detection-label">Auto-detected:</span>
                        <span class="detection-platform" id="detection-platform">-</span>
                        <span class="detection-type" id="detection-type">-</span>
                    </div>
                </div>

                <!-- Download Options -->
                <div class="download-options">
                    <div class="options-row">
                        <label class="checkbox-item">
                            <input type="checkbox" id="opt-files" checked>
                            <span class="checkmark"></span>
                            <span>ğŸ“ Download Files</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="opt-images" checked>
                            <span class="checkmark"></span>
                            <span>ğŸ“· Download Images</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="opt-videos" checked>
                            <span class="checkmark"></span>
                            <span>ğŸ¬ Download Videos</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="opt-metadata" checked>
                            <span class="checkmark"></span>
                            <span>ğŸ“‹ Save Metadata</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="quick-actions">
                <button class="action-btn" id="batch-btn">
                    <span class="action-icon">ğŸ“¦</span>
                    <span>Batch Download</span>
                </button>
                <button class="action-btn" id="gallery-btn">
                    <span class="action-icon">ğŸ–¼ï¸</span>
                    <span>Gallery Mode</span>
                </button>
                <button class="action-btn" id="profile-btn">
                    <span class="action-icon">ğŸ‘¤</span>
                    <span>Profile Scrape</span>
                </button>
                <button class="action-btn" id="model-btn">
                    <span class="action-icon">ğŸ§ </span>
                    <span>AI Models</span>
                </button>
                <button class="action-btn" id="transcribe-btn">
                    <span class="action-icon">ğŸ’¬</span>
                    <span>Transcribe</span>
                </button>
                <button class="action-btn" id="devtools-btn">
                    <span class="action-icon">ğŸ› ï¸</span>
                    <span>Dev Tools</span>
                </button>
            </section>

            <!-- Progress Section -->
            <section class="card progress-section" id="progress-section" style="display: none;">
                <div class="card-header">
                    <h2>â³ Download Progress</h2>
                    <span class="progress-percent" id="progress-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-info">
                    <div class="progress-status" id="progress-status">Initializing...</div>
                    <div class="progress-details" id="progress-details"></div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="card results-section" id="results-section" style="display: none;">
                <div class="card-header">
                    <h2>âœ… Download Complete</h2>
                    <button class="btn btn-ghost btn-sm" id="close-results">âœ•</button>
                </div>
                <div class="result-summary" id="result-summary"></div>
                <div class="result-files" id="result-files"></div>
                <div class="result-actions">
                    <button class="btn btn-secondary" id="open-folder">ğŸ“ Open Folder</button>
                    <button class="btn btn-secondary" id="download-zip">ğŸ“¦ Download ZIP</button>
                    <button class="btn btn-primary" id="new-download">â• New Download</button>
                </div>
            </section>

            <!-- History Section -->
            <section class="card history-section">
                <div class="card-header">
                    <h2>ğŸ“‹ Recent Downloads</h2>
                    <div class="header-actions">
                        <button class="btn btn-ghost btn-sm" id="refresh-history">ğŸ”„</button>
                        <button class="btn btn-ghost btn-sm" id="clear-history">ğŸ—‘ï¸</button>
                    </div>
                </div>
                <div class="history-list" id="history-list">
                    <div class="empty-state">
                        <span class="empty-icon">ğŸ“­</span>
                        <span>No downloads yet. Paste a URL above to get started!</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>ğŸŒŸ Part of the <a href="https://galion.studio" target="_blank">Galion.studio</a> Ecosystem ğŸŒŸ</p>
                <p class="footer-sub">Galion Initiative - 40% Open Source | âš¡ Serverless Ready</p>
                <p class="version">
                    v2.0.0 â€¢ 
                    <a href="/about.html">About</a> â€¢ 
                    <a href="https://galion.app" target="_blank">galion.app</a> â€¢ 
                    <a href="https://github.com/galion-studio" target="_blank">GitHub</a>
                </p>
            </div>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal" style="display: none;">
        <div class="modal-backdrop" id="modal-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>ğŸ”‘ API Keys Configuration</h2>
                <button class="btn btn-ghost btn-sm" id="close-modal">âœ•</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Configure API keys for enhanced features and NSFW content access.</p>
                
                <!-- Search and Filter Section -->
                <div class="api-keys-search-container">
                    <div class="search-input-wrapper">
                        <span class="search-icon">ğŸ”</span>
                        <input type="text" id="api-keys-search" placeholder="Search platforms..." autocomplete="off">
                        <button class="btn btn-ghost btn-sm clear-search" id="clear-api-search" style="display: none;">âœ•</button>
                    </div>
                    <div class="filter-chips">
                        <button class="filter-chip active" data-filter="all">All</button>
                        <button class="filter-chip" data-filter="configured">âœ“ Configured</button>
                        <button class="filter-chip" data-filter="required">âš¡ Required</button>
                        <button class="filter-chip" data-filter="frequent">ğŸ”¥ Frequent</button>
                    </div>
                </div>

                <!-- Smart Suggestions (AI-learned) -->
                <div class="smart-suggestions" id="smart-suggestions" style="display: none;">
                    <div class="suggestions-header">
                        <span class="suggestions-icon">ğŸ§ </span>
                        <span class="suggestions-title">Recommended for You</span>
                        <span class="suggestions-badge">AI-powered</span>
                    </div>
                    <div class="suggestions-list" id="suggestions-list">
                        <!-- Generated dynamically based on usage patterns -->
                    </div>
                </div>

                <!-- API Keys List with Show More -->
                <div class="api-keys-section">
                    <div class="api-keys-list" id="api-keys-list">
                        <!-- Generated dynamically -->
                    </div>
                    <button class="btn btn-secondary show-more-btn" id="show-more-api-keys" style="display: none;">
                        <span class="show-more-text">Show More</span>
                        <span class="show-more-count">(+0 platforms)</span>
                        <span class="show-more-icon">â–¼</span>
                    </button>
                </div>

                <!-- Usage Stats Footer -->
                <div class="usage-stats-footer" id="usage-stats-footer">
                    <div class="stat-item">
                        <span class="stat-value" id="stat-configured">0</span>
                        <span class="stat-label">Configured</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-total">0</span>
                        <span class="stat-label">Total Platforms</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-usage">0</span>
                        <span class="stat-label">Your Actions</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Batch Download Modal -->
    <div class="modal" id="batch-modal" style="display: none;">
        <div class="modal-backdrop" id="batch-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>ğŸ“¦ Batch Download</h2>
                <button class="btn btn-ghost btn-sm close-batch">âœ•</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Enter multiple URLs, one per line:</p>
                <textarea id="batch-urls" placeholder="https://civitai.com/models/123
https://github.com/user/repo
https://youtube.com/watch?v=xyz
..."></textarea>
                <div class="modal-actions">
                    <button class="btn btn-secondary close-batch">Cancel</button>
                    <button class="btn btn-primary" id="start-batch">Start Batch Download</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Transcription Modal -->
    <div class="modal" id="transcribe-modal" style="display: none;">
        <div class="modal-backdrop" id="transcribe-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>ğŸ’¬ Video Transcription (SRT)</h2>
                <button class="btn btn-ghost btn-sm close-transcribe">âœ•</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Generate subtitles (SRT/VTT) for videos using Whisper AI.</p>
                
                <div class="transcribe-status" id="transcribe-status">
                    <span class="status-icon">â³</span>
                    <span class="status-text">Checking Whisper installation...</span>
                </div>

                <div class="form-group">
                    <label>Videos Needing Transcription</label>
                    <div class="transcribe-videos" id="transcribe-videos">
                        <div class="empty-state small">Click "Scan Downloads" to find videos</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Model</label>
                        <select id="transcribe-model">
                            <option value="tiny">Tiny (fastest)</option>
                            <option value="base" selected>Base (balanced)</option>
                            <option value="small">Small</option>
                            <option value="medium">Medium</option>
                            <option value="large">Large (most accurate)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Language</label>
                        <select id="transcribe-language">
                            <option value="auto" selected>Auto-detect</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="it">Italian</option>
                            <option value="pt">Portuguese</option>
                            <option value="ru">Russian</option>
                            <option value="ja">Japanese</option>
                            <option value="ko">Korean</option>
                            <option value="zh">Chinese</option>
                        </select>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ“‹ Scriberr Integration:</strong>
                    <p>For best results, install <a href="https://scriberr.app/docs/installation.html" target="_blank">Scriberr</a> or OpenAI Whisper:</p>
                    <code>pip install openai-whisper</code>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-secondary" id="scan-videos-btn">ğŸ” Scan Downloads</button>
                    <button class="btn btn-primary" id="start-transcribe">ğŸ’¬ Transcribe All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Tools Modal -->
    <div class="modal" id="devtools-modal" style="display: none;">
        <div class="modal-backdrop" id="devtools-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>ğŸ› ï¸ Developer Tools</h2>
                <button class="btn btn-ghost btn-sm close-devtools">âœ•</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">File system scanner, format converter, and analysis tools.</p>

                <!-- Tab Navigation -->
                <div class="devtools-tabs">
                    <button class="tab-btn active" data-tab="scan">ğŸ“ File Scanner</button>
                    <button class="tab-btn" data-tab="formats">ğŸ“‹ Format Info</button>
                    <button class="tab-btn" data-tab="report">ğŸ“Š Report</button>
                </div>

                <!-- File Scanner Tab -->
                <div class="tab-content active" id="tab-scan">
                    <div class="scan-results" id="scan-results">
                        <div class="empty-state small">Click "Scan" to analyze your downloads</div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="scan-media-btn">ğŸ¬ Find Media</button>
                        <button class="btn btn-secondary" id="scan-models-btn">ğŸ§  Find Models</button>
                        <button class="btn btn-primary" id="scan-all-btn">ğŸ“ Scan All</button>
                    </div>
                </div>

                <!-- Format Info Tab -->
                <div class="tab-content" id="tab-formats" style="display: none;">
                    <div class="formats-grid" id="formats-grid">
                        <div class="format-card">
                            <h4>ğŸ¬ Video Formats</h4>
                            <p class="formats-list">.mp4 .mkv .avi .mov .webm .flv .ts</p>
                        </div>
                        <div class="format-card">
                            <h4>ğŸµ Audio Formats</h4>
                            <p class="formats-list">.mp3 .wav .flac .aac .ogg .m4a</p>
                        </div>
                        <div class="format-card">
                            <h4>ğŸ–¼ï¸ Image Formats</h4>
                            <p class="formats-list">.jpg .png .gif .webp .svg .bmp</p>
                        </div>
                        <div class="format-card">
                            <h4>ğŸ§  AI Model Formats</h4>
                            <p class="formats-list">.safetensors .ckpt .pt .pth .bin .onnx</p>
                        </div>
                        <div class="format-card">
                            <h4>ğŸ’¬ Subtitle Formats</h4>
                            <p class="formats-list">.srt .vtt .ass .ssa .sub</p>
                        </div>
                        <div class="format-card">
                            <h4>ğŸ“¦ Archive Formats</h4>
                            <p class="formats-list">.zip .rar .7z .tar .gz</p>
                        </div>
                    </div>
                </div>

                <!-- Report Tab -->
                <div class="tab-content" id="tab-report" style="display: none;">
                    <div class="report-content" id="report-content">
                        <div class="empty-state small">Click "Generate Report" to analyze files</div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="tree-btn">ğŸŒ³ Directory Tree</button>
                        <button class="btn btn-primary" id="report-btn">ğŸ“Š Generate Report</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>
